<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
  <title></title>
  <link rel="stylesheet" href="https://code.jquery.com/mobile/1.4.5/jquery.mobile.structure-1.4.5.min.css" />
  <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
  <script src="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
</head>

<body>
  <div id="formPlace">

  </div>


  <script>

    function createCardForm() {

      let fn = function (e) {

        var dataString = $(this).serialize();
        e.preventDefault();
        alert(dataString);
        return false;

      };

      // create the form
      let form = document.createElement("form");
      form.setAttribute("id", "form1");
      form.setAttribute("name", "tuna_card");
      form.setAttribute("action", "");
      // form.setAttribute('style', 'display:none');
      document.getElementById("formPlace").appendChild(form);
      form.addEventListener("submit", fn, false);

      /// creating the fields
      let holderName = document.createElement("input");
      holderName.setAttribute("type", "text");
      holderName.setAttribute("name", "name");
      holderName.setAttribute("autocomplete", "cc-name");
      holderName.setAttribute("id", "holder");
      form.appendChild(holderName);

      let cardNumber = document.createElement("input");
      cardNumber.setAttribute("type", "text");
      cardNumber.setAttribute("name", "card-number");
      cardNumber.setAttribute("autocomplete", "cc-number");
      cardNumber.setAttribute("id", "ccnumber");

      form.appendChild(cardNumber);

      let expDate = document.createElement("input");
      expDate.setAttribute("type", "text");
      expDate.setAttribute("name", "expiry-date");
      expDate.setAttribute("autocomplete", "cc-exp");
      expDate.setAttribute("id", "ccexp");

      form.appendChild(expDate);

      let cvv = document.createElement("input");
      cvv.setAttribute("type", "text");
      cvv.setAttribute("name", "card-cvv");
      cvv.setAttribute("autocomplete", "cc-csc");
      cvv.setAttribute("id", "cccsc");
      form.appendChild(cvv);

      let submit = document.createElement("input");
      submit.setAttribute("type", "submit");
      submit.setAttribute("name", "btnSubmit");
      submit.setAttribute("id", "btnSubmit");
      submit.setAttribute("value", "enviar");
      form.appendChild(submit);
    };

    function populateCardForm() {
      let cardData = {
        cardHolderName: "cardHolderName",
        number: "4929642749531926",
        expirationMonth: 10,
        expirationYear: 23,
        cvv: 123
      };

      $("#ccexp").val(`${cardData.expirationMonth}/${cardData.expirationYear}`);
      $("#cccsc").val(cardData.cvv);
      $("#ccnumber").val(cardData.number);
      $("#holder").val(cardData.cardHolderName);
    }

    function test(){
      createCardForm();
      setTimeout(() => {  console.log("foi populado!");populateCardForm(); }, 4000);
      setTimeout(() => {  console.log("foi submetido!");document.getElementById("btnSubmit").click(); }, 4000);
      
    }


    // $("#form").on("submit", fn);
  </script>

</body>

</html>